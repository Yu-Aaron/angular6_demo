<div class="interface_content">
  <!-- 管理接口 -->
  <div class="management_interface" >
    <div class="management_interface_left">管理接口</div>
    <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
      <div class="management_interface_right" nz-row>
        <div nz-col [nzSpan]="24">
          <div nz-col [nzSpan]="4">
            <span>接口名称&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.portName}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>链接状态&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak [ngClass]="{'filed': management_interface?.linkState === '未连接', 'success': management_interface?.linkState === '已连接', 'close': management_interface?.linkState === '关闭'}">{{management_interface?.linkState}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>IP&nbsp;:</span>&nbsp;&nbsp;
            <span *ngIf="isShowEditM" ng-cloak>{{management_interface?.portIp}}</span>
            <nz-form-item>
              <nz-form-control>
                <input nz-input type="text" formControlName ="portIp" id="portIp" *ngIf="!isShowEditM" [(ngModel)]="editManageData.portIp">
                <nz-form-explain *ngIf="!isErrorIP">
                  请输入有效的IP地址
                </nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <span>网关&nbsp;:</span>&nbsp;&nbsp;
            <span *ngIf="isShowEditM" ng-cloak>{{management_interface?.gateway}}</span>
            <nz-form-item>
              <nz-form-control>
                <input type="text" nz-input formControlName ="gateway" [(ngModel)]="editManageData.gateway" *ngIf="!isShowEditM">
                <nz-form-explain *ngIf="!isErrorGateway">
                    请输入有效默认网关
                </nz-form-explain>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div nz-col [nzSpan]="4">
            <span>掩码&nbsp;:</span>&nbsp;&nbsp;
            <span *ngIf="isShowEditM" ng-cloak>{{management_interface?.netMask}}</span>
            <nz-form-item>
              <nz-form-control>
                <input type="text" nz-input formControlName ="netMask" [(ngModel)]="editManageData.netMask" *ngIf="!isShowEditM">
              </nz-form-control>
              <nz-form-explain *ngIf="!isErrorNetMask">
                  请输入有效掩码
              </nz-form-explain>
            </nz-form-item>
          </div>
        </div>
        <div nz-col [nzSpan]="24">
          <div nz-col [nzSpan]="4">
            <span>发送报文数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.txTotalTmp}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>发送丢包数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.txDroppedTmp}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>发送错包数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.txErrosTmp}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>接收报文数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.rxTotalTmp}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>接收丢包数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak>{{management_interface?.rxDroppedTmp}}</span>
          </div>
          <div nz-col [nzSpan]="4">
            <span>接收错包数&nbsp;:</span>&nbsp;&nbsp;
            <span ng-cloak >{{management_interface?.rxErrosTmp}}</span>
          </div>
        </div>
      </div>
    </form>
    <div class="management_event">
      <button nz-button nzType="primary" class="edit_btn" (click)="editManageInterface()" *ngIf="isShowEditM && !loadingData"><i nz-icon nzType="edit" nzTheme="outline"></i>编辑</button>
      <button nz-button nzType="primary" class="edit_btn" (click)="saveManageInterface()" *ngIf="!isShowEditM && !loadingData"><i nz-icon nzType="edit" nzTheme="outline"></i>保存</button>
      <button nz-button nzType="primary" class="edit_btn" (click)="cancelManageInterface()" *ngIf="!isShowEditM && !loadingData"><i nz-icon nzType="edit" nzTheme="outline"></i>取消</button>
      <button nz-button nzType="primary" disabled *ngIf="loadingData">更新中......</button>
    </div>
  </div>
  <!-- 业务接口 -->
  <div class="business_interface">
    <p>业务接口</p>
    <div class="business_table">
      <nz-table #businessTable
        [nzData]="listOfData"
        [nzTotal]="total"
        [nzShowQuickJumper]="true"
        [nzFrontPagination]="false"
        [(nzPageIndex)]="pageIndex"
        [(nzPageSize)]="pageSize"
        (nzPageIndexChange)="pageIndexChange()"
        [nzLoading]="loading"
        [nzShowTotal]="businessTableTotal">
      <thead>
        <tr>
          <th>接口名称</th>
          <th>接口状态</th>
          <th>发送报文数</th>
          <th>发送丢包数</th>
          <th>发送错包数</th>
          <th>接收报文数</th>
          <th>接收丢包数</th>
          <th>接收错包数</th>
          <th>清除接口报文统计</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of businessTable.data">
          <td>{{item.portName}}</td>
          <td [ngClass]="{'filed': item?.linkState === 0, 'success': item?.linkState === 1, 'close': item?.linkState === -1}">{{transformState(item.linkState)}}</td>
          <td>{{item.txTotalTmp}}</td>
          <td>{{item.txDroppedTmp}}</td>
          <td>{{item.txErrosTmp}}</td>
          <td>{{item.rxTotalTmp}}</td>
          <td>{{item.rxDroppedTmp}}</td>
          <td>{{item.txErrosTmp}}</td>
          <td class="clear" (click)="clearData(item.portId)">清除</td>
        </tr>
      </tbody>
    </nz-table>
    <ng-template #businessTableTotal>
      <span>共 {{total}} 条，</span>
      <span>每页展示 {{pageSize}} 条，</span>
      <span>共 {{pages}} 页</span>
    </ng-template>
    </div>
  </div>
  <!-- 聚合接口 -->
  <div class="aggregate_interface">
    <p>聚合接口</p>
    <div class="right_aggregate">
      <span>聚合接口使用中不可编辑</span>
      <button nz-button nzType="primary" class="edit_btn" (click)="addAgregate('新增', '')"><i nz-icon nzType="plus" nzTheme="outline"></i>新增聚合接口</button>
    </div>
    <div class="business_table">
      <nz-table #aggregateTable
              [nzData]="listOfData"
              [nzTotal]="agtotal"
              [nzShowQuickJumper]="true"
              [nzFrontPagination]="false"
              [(nzPageIndex)]="pageIndex"
              [(nzPageSize)]="pageSize"
              (nzPageIndexChange)="pageIndexChange()"
              [nzLoading]="loading"
              [nzShowTotal]="aggregateTableTotal">
        <thead>
          <tr>
            <th>接口名称</th>
            <th>接口状态</th>
            <th>发送报文数</th>
            <th>发送丢包数</th>
            <th>发送错包数</th>
            <th>接收报文数</th>
            <th>接收丢包数</th>
            <th>接收错包数</th>
            <th>接口描述</th>
            <th>操作</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of aggregateTable.data">
            <td>{{item.portName}}</td>
            <td [ngClass]="{'filed': item?.linkState === 0, 'success': item?.linkState === 1, 'close': item?.linkState === -1}">{{transformState(item.linkState)}}</td>
            <td>{{item.txTotalTmp}}</td>
            <td>{{item.txDroppedTmp}}</td>
            <td>{{item.txErrosTmp}}</td>
            <td>{{item.rxTotalTmp}}</td>
            <td>{{item.rxDroppedTmp}}</td>
            <td>{{item.txErrosTmp}}</td>
            <td>{{item.txErrosTmp}}</td>
            <td class="clear"><span (click)="addAgregate('编辑', item.portName)">编辑</span><span (click)="clearData(item.portId)">清除</span><span (click)="deleteData(item)">删除</span></td>
          </tr>
        </tbody>
      </nz-table>
      <ng-template #businessTableTotal>
        <span>共 {{agtotal}} 条，</span>
        <span>每页展示 {{pageSize}} 条，</span>
        <span>共 {{agpages}} 页</span>
      </ng-template>
    </div>
    <app-add-agregate
      [isVisible]="isVisible"
      [tranformData]="tranformData"
      *ngIf="isVisible"
      (closeModal)="closeModal($event)"
      [modelTitle]="modelTitle">
    </app-add-agregate>
  </div>
</div>