<nz-modal
  [(nzVisible)]="isVisible"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  [nzTitle]="modelTitle"
  [nzContent]="modalContent"
  [nzFooter]="modalFooter"
  [nzWidth]="625">
    <ng-template #modalTitle>
      新增用户
    </ng-template>
    <ng-template #modalContent>
      <form nz-form [formGroup]="validateForm" (ngSubmit)="submitForm()">
          <nz-form-item>
            <nz-form-label [nzSpan]="6">用户名</nz-form-label>
            <nz-form-control [nzSpan]="14">
              <input nz-input type="text" formControlName="userName" *ngIf="!editProperty" [(ngModel)]="userInfo.name">
              <span *ngIf="editProperty">{{userInfo.name}}</span>
              <label class="user_name_warning">
                  <div class="help-msg" *ngIf="message.name"><span></span>用户名已存在</div>
              </label>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSpan]="6">角色</nz-form-label>
            <nz-form-control [nzSpan]="14">
              <nz-select [(ngModel)]="defaultRole" formControlName="role" *ngIf="userInfo.role.id!='1'" (ngModelChange)="selectRoleChange($event)">
                <nz-option *ngFor="let option of userRoles" [nzLabel]="option.label" [nzValue]="option.value"></nz-option>
              </nz-select>
              <input nz-input type="text" formControlName="role" [(ngModel)]="userInfo.role.name" readonly *ngIf="userInfo.role.id=='1'"/>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="role_message">
            <nz-form-label [nzSpan]="6">角色描述</nz-form-label>
            <nz-form-control [nzSpan]="14" style="color: #25B4F1">
              <span *ngIf="userInfo.role.id==='2'">可以从设备读取业务数据，或操作业务逻辑，不具备管理设备全局运行参数的权限</span>
              <span *ngIf="userInfo.role.id==='1'">可对设备进行任何操作</span>
              <span *ngIf="userInfo.role.id==='3'">只能从设备读取数据，不能对设备进行任何设置</span>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="role_message" *ngIf="editProperty && lockedShow">
            <nz-form-label [nzSpan]="6">锁定</nz-form-label>
            <nz-form-control [nzSpan]="14">
                <nz-radio-group [(ngModel)]="userInfo.locked" formControlName="locked">
                  <label nz-radio nzValue="是">是</label>
                  <label nz-radio nzValue="否">否</label>
                </nz-radio-group>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSpan]="6">密码</nz-form-label>
            <nz-form-control [nzSpan]="14">
              <input nz-input type="password" id="password" placeholder="请输入密码" formControlName="password" [(ngModel)]="userInfo.password">
              <label class="user_name_warning" style="color:#FFCC33">
                  <div class="help-msg" *ngIf="message.password.value===1"><span></span>必须是字母加数字和符号，8位或以上，25位以下</div>
                  <div class="help-msg" *ngIf="message.password.value===4"><span></span>任意字母、数字或字符，8位或以上，25位以下</div>
                  <div class="help-msg" *ngIf="message.password.value===5"><span></span>必须是字母加数字和符号，12位或以上，25位以下</div>
                  <div class="help-msg" *ngIf="message.password.value===2"><span></span>密码不符合规则，请重新输入</div>
                  <div class="help-msg" *ngIf="message.password.value===3"><img src="../../../../../assets/images/success.svg"></div>
              </label>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item>
            <nz-form-label [nzSpan]="6">确认密码</nz-form-label>
            <nz-form-control [nzSpan]="14">
              <input nz-input type="password" id="validate_password" formControlName="validate_password" placeholder="再次输入密码" [(ngModel)]="userInfo.passwordValidate">
              <label class="user_name_warning" style="color:#FFCC33">
                  <div class="help-msg" *ngIf="message.passwordValidate.value===1"><span></span>请再输入一次刚才设置的密码</div>
                  <div class="help-msg modal-two-no" *ngIf="message.passwordValidate.value===2"><span></span>两次输入不一致</div>
                  <div class="help-msg" *ngIf="message.passwordValidate.value===3"><img src="../../../../../assets/images/success.svg"></div>
              </label>
            </nz-form-control>
          </nz-form-item>
        </form>
    </ng-template>
    <ng-template #modalFooter>
      <button nz-button nzType="primary" (click)="handleCancel()">取消</button>
      <button nz-button nzType="primary" nzSize="large" (click)="editProperty ? handleOkEdit() : handleOk()" [nzLoading]="isConfirmLoading" [disabled]="editProperty ? message.name||!message.password||!message.passwordValidate||validateForm.controls.validate_password.value!=validateForm.controls.password.value||userInfo.password==null||userInfo.name==null||userInfo.passwordValidate==null||userInfo.role=={} : message.name||!message.password||!message.passwordValidate||userInfo.password==null || validateForm.controls.validate_password.value!=validateForm.controls.password.value || userName == null || userInfo.role=={} || message.password.value != 3||message.passwordValidate.value != 3">{{fooletrTitle}}</button>
    </ng-template>
  </nz-modal>